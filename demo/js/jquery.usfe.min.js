/*

 USFE (User Style Form Elements) â€” jQuery plugin
 Version: 1.9.14
 Author: M.Ulyanov (web.ulyanov@gmail.com)
 Site: http://web-ulyanov.ru
 Source && Doc: https://github.com/M-Ulyanov/Plugin-USFE/
 Example: http://example.web-ulyanov.ru/frontend/usfe/demo/index.html

 */

(function(a){a.fn.usfe=function(s){var c={f_defaultFileName:"\u0424\u0430\u0439\u043b \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d",f_defaultFileNameDel:"\u0424\u0430\u0439\u043b \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d",f_FileNameLength:30,f_defaultButtonName:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c",f_editButtonName:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c",f_charDelete:"&#215;",f_bgDelete:"#f48475",n_maxVal:Infinity,n_editBg:!0,n_iconPlus:"+",n_iconMinus:"-",t_animateEffect:!0,
t_animateSpeed:400,t_editW:12,t_editH:3,t_color:"#FFF",t_backgroundcolor:"#475160",te_animateEffect:!0,te_animateSpeed:400,te_color:"#FFF",te_backgroundcolor:"#475160",c_styleCheckbox:"style-1",s_height:!1,cal_animateSpeed:0,cal_animateSwitch:!1,cal_animateSwitchSpeed:300,se_height:208,se_animateEffect:!0,se_animateSpeed:400,se_animateToogleSpeed:200,se_color:"#FFF",se_backgroundcolor:"#475160"};s=a.extend(c,s);var m={init:function(){a(this).data("tooltip");a(this).data("tooltip",{target:a(this)})},
typeFile:function(b){function f(){var b=a(this).parent().find('input[type="file"]');a(b).prop("value","");a(this).parent().find(h).removeClass("select-file").text(c.f_defaultFileNameDel);a(this).parent().find(h).animate({opacity:1},400);a(this).css({display:"none"})}var e=a('<div class="file-wrap"></div>'),d=a('<button type="button" class="file-button"></button>'),h=a('<div class="file-name"></div>'),l=a('<span class="file-del">'+c.f_charDelete+"</a>");1>a(b).parents(".file-wrap").length&&(a(b).wrap(e),
a(b).after(d,h));a(b).parents(".file-wrap").find(".file-button").text(c.f_defaultButtonName);a(b).parents(".file-wrap").find(".file-name").text(c.f_defaultFileName);b=a(b);a(b).attr("disabled")&&a(b).parents(".file-wrap").addClass("file-disabled");a(d).on("click",function(){b.click();var f=window.File?!0:!1;a(b).on("change",function(){var k;f&&b[0].files[0]?k=b[0].files[0].name:(k=b.val().split("\\"),k=k[k.length-1]);if(k.length){if(k.length>c.f_FileNameLength){var g=k;a(b).parent(e).attr("title",
g);k=k.substring(0,c.f_FileNameLength);k+="..."}h.addClass("select-file").text(k);d.text(c.f_editButtonName);a(b).parent().append(l);a(l).css({display:"block",opacity:1})}}).change()});a(l).on("click",function(){if(a(this).parents(".file-wrap").hasClass("file-disabled"))return!1;var d=this,l=a(b).parents(".file-wrap").css("backgroundColor");a(b).parent(e).removeAttr("title");a(this).parent().stop(!0,!0).animate({backgroundColor:c.f_bgDelete},400).stop(!0,!0).animate({backgroundColor:l},400);a(this).parent().find(h).animate({opacity:0});
a(this).parent().find(d).animate({opacity:0});setTimeout(function(){f.call(a(d))},600)})},typeNumber:function(b){function f(b,d){isNaN(d)&&(d=1);if(d>c.n_maxVal)return!1;a(b).parent().find('input[type="usfe-number"]').val(d);a(b).parent().find('input[type="usfe-number"]').attr("value",d)}var e=a('<div class="number-wrap"></div>'),d=a('<button type="button" value="-" class="number-plus"></button>'),h=a('<button type="button" value="-" class="number-minus"></button>');1>a(b).parents(".number-wrap").length&&
(a(b).wrap(e),a(b).before(h).after(d),a(b).next(".number-plus").on("click",function(){var b=a(this).parent().find('input[type="usfe-number"]'),d=a(b).val();d++;c.n_editBg&&a(b).stop(!0,!0).animate({backgroundColor:"#9bcb1e"},400).stop(!0,!0).animate({backgroundColor:"#FFF"},400);f(this,d)}),a(b).prev(".number-minus").on("click",function(){var b=a(this).parent().find('input[type="usfe-number"]'),d=a(b).val();d--;d||(d=1);c.n_editBg&&a(b).stop(!0,!0).animate({backgroundColor:"#ea6856"},400).stop(!0,
!0).animate({backgroundColor:"#FFF"},400);f(this,d)}));a(b).parents(".number-wrap").find(".number-plus").text(c.n_iconPlus);a(b).parents(".number-wrap").find(".number-minus").text(c.n_iconMinus);a('input[type="usfe-number"]').on("keypress input change",function(b){if(48>b.charCode||57<b.charCode)return!1;b=a(this).parent().find('input[type="usfe-number"]').val();f(this,b)})},typeText:function(b){a(b).attr("disabled")&&a(b).addClass("disabled-input");if(c.t_animateEffect){var f=a('<div class="text-wrap">'),
e=a(b).css("backgroundColor"),d=a(b).css("color"),h=a(b).height(),l=a(b).width(),m=a(b).innerHeight();1>a(b).parents(".text-wrap").length&&a(b).wrap(f);a(".text-wrap").css({position:"relative",height:m});a(b).focus(function(){a(this).animate({width:l+c.t_editW,height:h+c.t_editH,backgroundColor:c.t_backgroundcolor,color:c.t_color},c.t_animateSpeed)});a(b).focusout(function(){a(this).animate({width:l,height:h,backgroundColor:e,color:d},c.t_animateSpeed)})}},typeButton:function(b){a(b).addClass("butsub-element")},
typeTextarea:function(b){c.te_animateEffect&&(textareaDefaultBg=a(b).css("backgroundColor"),textareaDefaultColor=a(b).css("color"),a(b).focus(function(){a(this).animate({backgroundColor:c.te_backgroundcolor,color:c.te_color},c.te_animateSpeed)}),a(b).focusout(function(){a(this).animate({backgroundColor:textareaDefaultBg,color:textareaDefaultColor},c.te_animateSpeed)}))},typeRadio:function(b){if(1>a(b).parents(".radio-wrap").length){var c=a('<div class="radio-wrap">'),e=a('<span class="custom-radio"></span>'),
d=a(b).attr("id"),h=a(b).attr("name"),l=a(b).next("label"),m=a(b).parent("label");a(b).parent("label").length?(a(m).wrap(c),a(b).before(e)):(a(b).wrap(c),a(b).before(e,l));a(b).addClass("hidden-radio");a(e).attr({"data-radio":d,"data-radiogroup":h});0<l.length&&(c=a("label[for='"+d+"']").text(),a(b).attr("value")||a(b).val(c));d=a(b).attr("checked");c=a(b).attr("disabled");d&&(d=a(b).attr("name"),a("span[data-radiogroup='"+d+"']").removeClass("active-radio"),a(b).parents(".radio-wrap").find("span").addClass("active-radio"),
a(b).attr("checked",!0));c&&a(b).parents(".radio-wrap").find("span").addClass("disable-radio");a(e).on("click",function(){if(!a(this).hasClass("disable-radio")){var b=a(this).attr("data-radiogroup");a("span[data-radiogroup='"+b+"']").removeClass("active-radio");a(this).addClass("active-radio");var b=a(this).attr("data-radio"),d=a("input[id='"+b+"']").attr("name");a("input[name='"+d+"']").removeAttr("checked");a("input[id='"+b+"']").attr("checked",!0);a("input[id='"+b+"']").click();"undefined"===typeof b&&
a(this).parents(".radio-wrap").find("input").click()}});a(l).on("click",function(){e.click()});a(m).on("click",function(){if(!a(this).find("span").hasClass("disable-radio")){var b=a(this).find(".custom-radio"),d=a(b).attr("data-radiogroup");a("span[data-radiogroup='"+d+"']").removeClass("active-radio");a(b).addClass("active-radio")}})}},typeCheckbox:function(b){var f="style-1"==c.c_styleCheckbox?"":"style-2"==c.c_styleCheckbox?"c-s-2":"",e=a('<span class="custom-checkbox '+f+'"></span>'),f=a('<div class="checkbox-wrap">'),
d=a(b).next("label"),f,h=a(b).parent("label");1>a(b).parents(".checkbox-wrap").length?(a(b).parent("label").length?(a(h).wrap(f),a(b).before(e)):(a(b).wrap(f),a(b).before(e).after(d)),a(b).css({opacity:0,position:"absolute",left:"-9999px"})):(a(b).prev("span").remove(),a(b).before(e));0<d.length&&(f=a(b).parent("div").find("label").text(),a(b).attr("value")||a(b).val(f));a(b).attr("checked")&&a(b).prev("span").addClass("active-checkbox");a(b).attr("disabled")&&a(b).prev("span").addClass("disabled-checkbox");
a(e).on("click",function(){a(this).parent(".checkbox-wrap").find('input[type="checkbox"]').click()});a(b).on("click",function(){var b=a(this).parents(".checkbox-wrap");a(b).find("input").is(":checked")?(a(b).find(e).addClass("active-checkbox"),a(this).attr("checked",!0)):(a(b).find(e).removeClass("active-checkbox"),a(this).removeAttr("checked"))})},typeSelect:function(b){function f(b){var d="",d=b?"&#9650":"&#9660";a(l).find("div").remove();a(l).append('<div class="select-this-trigger-arrow">'+d+
"</div>")}var e=a('<div class="select-wrap">'),d=a('<div class="select-this">'),h=a('<div class="select-this-text">'),l=a('<div class="select-this-trigger">'),q=a('<div class="select-this-trigger-arrow">&#9660;</div>'),k=a('<div class="select-dropdown">'),g=a("<ul>");1>a(b).parents(".select-wrap").length&&(a(b).before(e),a(d).append(h,a(l).append(q)),a(e).append(d,k,b));a(b).attr("disabled")&&a(d).addClass("select-disabled");var p=!1,n=0;a(b).children("option, optgroup").each(function(){if("optgroup"==
this.nodeName.toLowerCase()){var b=a(this).attr("class");a(g).append('<li class="optgroup '+b+'">'+a(this).attr("label")+"</li>");a(this).find("option").each(function(){var d="element-"+n++;a(this).attr("data-opt",d);var c=a(this).text();a(g).append('<li data-li="'+d+'" class="option '+b+'">'+c+"</li>");a(this).attr("disabled")&&(d=a(this).attr("data-opt"),a(g).find('li[data-li="'+d+'"]').addClass("disabled"));d=a(g).find("li.selected").length;a(this).attr("selected")&&1>d&&(a(h).text(a(this).text()),
d=a(this).attr("data-opt"),a(g).find('li[data-li="'+d+'"]').addClass("selected"),p=!0)})}else if("option"==this.nodeName.toLowerCase()){(b=a(this).attr("class"))||(b="");var d=a(this).text();a(g).append('<li class="'+b+'">'+d+"</li>");a(this).attr("disabled")&&(d=a(this).index(),a(g).children("li").eq(d).addClass("disabled"));d=a(g).find("li.selected").length;a(this).attr("selected")&&1>d&&(a(h).text(a(this).text()),d=a(this).index(),a(g).children("li").eq(d).addClass("selected"),p=!0)}});a(k).append(g);
if(!p){for(e=0;a(g).find("li").eq(e).hasClass("disabled");)e++;q=a(b).find("option").eq(e);a(h).text(a(q).text());a(g).find("li").eq(e).addClass("selected")}a(d).on("click",function(b){b.stopPropagation();if(a(this).hasClass("select-disabled")||a(this).hasClass("optgroup"))return!1;var d=a(this);a(".select-this").each(function(){a(this)!==d&&(a(this).find(".select-this-trigger-arrow").remove(),a(this).find(".select-this-trigger").append('<div class="select-this-trigger-arrow">&#9660</div>'))});b=
a(this).parent().find(".select-dropdown");a(b).is(":hidden")?(a(".select-dropdown").hide(),a(b).show(),f(!0)):(a(b).hide(),f(!1))});a(g).find("li").on("click",function(b){b.stopPropagation();if(a(this).hasClass("disabled")||a(this).hasClass("optgroup"))return!1;a(this).parent().find("li").removeClass("selected");a(this).addClass("selected");a(h).text(a(this).text());a(this).parents(".select-dropdown").hide();f(!1)});a(g).find("li").hover(function(){a(this).parents("ul").addClass("hover-list")},function(){a(this).parent("ul").removeClass("hover-list")});
a("html").on("click",function(){a(".select-dropdown").hide();f(!1)});c.s_height&&a(b).parents(".select-wrap").find("ul").css({height:c.s_height+"px",overflowY:"scroll"});a(b).on("refresh",function(){a(b).off().parent().before(b).remove();m.typeSelect(b)})},typeCalendar:function(b){function f(b,d){a(g).empty();var c="<tr>",e=new Date(b,d),f=(new Date(e.getFullYear(),e.getMonth()+1,0)).getDate(),k=(new Date(e.getFullYear(),e.getMonth(),0)).getDate(),l=(new Date(e.getFullYear(),e.getMonth(),1)).getDay(),
m=(new Date(e.getFullYear(),e.getMonth(),f)).getDay(),c=c+'<td class="prev-month"><span></td>'+('<td class="month" data-month="'+d+'" colspan="3">'+r[e.getMonth()]+"</td>"),c=c+('<td class="year" data-year="'+b+'" colspan="2">'+b);NaN;c+='<td class="next-month"><span></td>';c+="</tr>";for(e=0;7>e;e++)c+='<td class="tr-week">'+t[e],NaN;c+="</tr>";c+="<tr>";if(0==l)for(var n=k-6,e=0;6>e;e++)n++,c+='<td class="prevday">'+n+"</td>";else{if(1==l){n=k-7;for(e=0;7>e;e++)n++,c+='<td class="prevday">'+n+"</td>";
c+="</tr>"}n=k-l+1;for(e=1;e<l;e++)n++,c+='<td class="prevday">'+n+"</td>"}for(e=1;e<=f;e++)k=(new Date(b,d,e)).getDay(),e==h.getDate()&&d==h.getMonth()&&b==h.getFullYear()?c+='<td class="today day">'+e+"</td>":c+='<td class="day">'+e+"</td>",0==k&&(c+="</tr>");if(0!=m){f=1;for(f;f<=7-m;f++)c+='<td class="nextday">'+f+"</td>";m=[];m=c.split("</tr>");if(7>=m.length)for(c+="<tr>",e=1;7>=e;e++)c+='<td class="nextday">'+f+"</td>",f++}else{for(e=1;7>=e;e++)c+='<td class="nextday">'+e+"</td>";c+="</tr>"}a(g).append(c);
a(g).find("tr").each(function(){a(this).find("td:eq(5), td:eq(6)").addClass("weekend")})}function e(c,d,e){c||(c=h.getDate());d||(d=h.getMonth()+1);e||(e=h.getFullYear());9>=c&&(c="0"+c);9>=d&&(d="0"+d);a(b).val(c+"."+d+"."+e)}function d(){var c=a(b).parents(".calendar-wrap");a(c).find(".calendar-button, .calendar").remove()}var h=new Date,l=h.getMonth(),m=h.getFullYear(),k=a('<div class="calendar-wrap"></div>'),g=a('<table class="calendar"></table>'),p=a('<span class="calendar-button"></span>'),
n=a('<span class="calendar-icon"></span>'),r="\u042f\u043d\u0432\u0430\u0440\u044c \u0424\u0435\u0432\u0440\u0430\u043b\u044c \u041c\u0430\u0440\u0442 \u0410\u043f\u0440\u0435\u043b\u044c \u041c\u0430\u0439 \u0418\u044e\u043d\u044c \u0418\u044e\u043b\u044c \u0410\u0432\u0433\u0443\u0441\u0442 \u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c \u041e\u043a\u0442\u044f\u0431\u0440\u044c \u041d\u043e\u044f\u0431\u0440\u044c \u0414\u0435\u043a\u0430\u0431\u0440\u044c".split(" "),t="\u041f\u043d \u0412\u0442 \u0421\u0440 \u0427\u0442 \u041f\u0442 \u0421\u0431 \u0412\u0441".split(" ");
a(b).attr("readonly",!0);f(m,l);e();a(document).on("click",".next-month",function(b){b.stopPropagation();var d=parseFloat(a(this).parent().find(".month").attr("data-month")),e=parseFloat(a(this).parent().find(".year").attr("data-year"));d++;12<=d&&(d=0,e++);c.cal_animateSwitch?a(this).closest(g).animate({left:"100px",opacity:0},c.cal_animateSwitchSpeed,function(){f(e,d)}).animate({left:"-100px"},0).animate({left:"0",opacity:1},c.cal_animateSwitchSpeed):a(this).closest(g).animate({left:0},0,function(){f(e,
d)})});a(document).on("click",".prev-month",function(b){b.stopPropagation();var d=parseFloat(a(this).parent().find(".month").attr("data-month")),e=parseFloat(a(this).parent().find(".year").attr("data-year"));d--;0>=d&&(d=11,e--);c.cal_animateSwitch?a(this).closest(g).animate({left:"-100px",opacity:0},c.cal_animateSwitchSpeed,function(){f(e,d)}).animate({left:"100px"},0).animate({left:"0",opacity:1},c.cal_animateSwitchSpeed):a(this).closest(g).animate({left:0},0,function(){f(e,d)})});1>a(b).parents(".calendar-wrap").length?
a(b).wrap(k):d();a(b).after(p,g);a(p).append(n);a(b).attr("disabled")&&a(b).parent(".calendar-wrap").addClass("calendar-disabled");a(p).on("click",function(b){if(a(this).parents(".calendar-wrap").hasClass("calendar-disabled"))return!1;b.stopPropagation();a(".calendar").stop(1).fadeOut(c.cal_animateSpeed);a(this).next(".calendar").stop(1).fadeToggle(c.cal_animateSpeed)});a(g).on("click",".day",function(){a(this).closest(".calendar").find("td").removeClass("select-day");a(this).addClass("select-day");
for(var b=a(this).closest(".calendar").find(".month").text(),d=a(this).closest(".calendar").find(".year").text(),c,f=0;f<r.length;f++)r[f]==b&&(c=f+1);e(a(this).text(),c,d)});a(document).on("click",function(b){a(b.target).closest(".calendar").length||(a(g).fadeOut(c.cal_animateSpeed),b.stopPropagation())})},typeSearch:function(b){var f=[],e=0,d='<ul class="result-list">',h=a('<div class="seach-wrap">'),l=a('<div class="seach-bg">'),q=a('<input type="submit" class="seach-icon">'),k="#"+a(b).attr("data-list");
a(b).wrap(h);a(b).after(d,a(k));a(b).wrap(l);a(b).after(q);a(".result-list").css({"max-height":208});a(k).css("display","none");d=a(b).closest(".seach-wrap").find(".result-list");a(k).find("li").each(function(){f.push(a(this).text());a(d).append("<li>"+a(this).text()+"</li>")});a(b).keyup(function(h){e=a(this).val().length;a(d).find("li").data("li-height");if(38!==h.which&&40!==h.which){h=a(this).val().toLowerCase();if(!h)return a(d).stop().fadeIn(200),!1;for(var g=0;g<f.length;g++){var k=f[g].toLowerCase().substr(0,
e),l=h.substr(0,e);k==l?0==a('li:contains("'+f[g]+'")').length&&a("<li>"+f[g]+"</li>").appendTo(d):a('li:contains("'+f[g]+'")').remove()}a(".no-result").remove();0==a(d).find("li").length&&a('<li class="no-result">\u0421\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0439 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e.</li>').appendTo(d)}else if(a(d).is(":visible")){if(0!==a(d).find("li.no-result").length)return!1;g=a(d).find("li.selected");k=a(d).find("li").length;40==h.which?(0==g.length?
a(d).find("li").eq(0).addClass("selected"):(a(g).next().addClass("selected"),a(g).removeClass("selected"),a(g).next().length||a(d).find("li").eq(0).addClass("selected")),a(d).scrollTop(a(".result-list").scrollTop()+a(".result-list").find("li").filter(".selected").position().top)):38==h.which&&(a(g).prev().addClass("selected"),a(g).removeClass("selected"),a(g).prev().length||a(d).find("li").eq(k-1).addClass("selected"),a(d).scrollTop(a(".result-list").scrollTop()+a(".result-list").find("li").filter(".selected").position().top));
h=a(d).find("li.selected").text();a(b).val(h)}a(d).css("max-height",c.se_height);e?a(d).fadeIn(c.se_animateToogleSpeed):a(d).fadeOut(c.se_animateToogleSpeed)});a(document).on("click",".result-list li",function(){if(a(this).hasClass("no-result"))return!1;var b=a(this).text();a(this).parents(".seach-wrap").find("li").removeClass("selected");a(this).addClass("selected");a(this).parents(".seach-wrap").find('input[type="usfe-search"]').val(b)});a("body").on("click",function(){a(d).fadeOut(c.se_animateToogleSpeed)});
var g=a(b).parent("div").css("backgroundColor"),p=a(b).css("color");c.se_animateEffect&&(a(b).focus(function(){a(this).parent(".seach-bg").animate({backgroundColor:c.se_backgroundcolor,color:c.se_color},c.se_animateSpeed);a(this).animate({color:c.se_color},c.se_animateSpeed);a(this).next(".seach-icon").css({backgroundPosition:"0 -23px"})}),a(b).focusout(function(){a(this).parent(".seach-bg").animate({backgroundColor:g,color:p},c.se_animateSpeed);a(this).animate({color:p},c.te_animateSpeed);a(this).next(".seach-icon").css({backgroundPosition:"0 0"})}));
a(b).on("refresh",function(){a(b).off().parent().before(b).remove();m.typeSearch(b)})}};return this.each(function(){function b(b){switch(a(b).attr("type")){case "file":m.typeFile(b);break;case "text":case "password":case "email":m.typeText(b);break;case "usfe-number":m.typeNumber(b);break;case "submit":case "button":case "reset":m.typeButton(b);break;case "textarea":m.typeTextarea(b);break;case "radio":m.typeRadio(b);break;case "checkbox":m.typeCheckbox(b);break;case "select":m.typeSelect(b);break;
case "usfe-calendar":m.typeCalendar(b);break;case "usfe-search":m.typeSearch(b);break;default:console.log("\u041e\u0448\u0438\u0431\u043a\u0430! \u042d\u043b\u0435\u043c\u0435\u043d\u0442 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u043d:"),console.log(b)}}var c;"form"==this.nodeName.toLowerCase()?a(this).find("input, button, textarea, select").each(function(){"textarea"==this.nodeName.toLowerCase()&&a(this).attr("type","textarea");
"select"==this.nodeName.toLowerCase()&&a(this).attr("type","select");c=this;b(c)}):("textarea"==this.nodeName.toLowerCase()&&a(this).attr("type","textarea"),"select"==this.nodeName.toLowerCase()&&a(this).attr("type","select"),b(this))})}})(jQuery);